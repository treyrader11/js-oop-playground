<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS Class & Inheritance Assessment</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .difficulty-badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        padding: 8px 20px;
        border-radius: 20px;
        font-size: 0.9em;
        margin-top: 10px;
        backdrop-filter: blur(10px);
      }

      .content {
        padding: 40px;
      }

      .intro {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border-left: 4px solid #667eea;
      }

      .intro h2 {
        color: #667eea;
        margin-bottom: 15px;
      }

      .intro ul {
        margin-left: 20px;
        line-height: 1.8;
      }

      .setup {
        background: #e7f3ff;
        border-left: 4px solid #2196f3;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
      }

      .setup h3 {
        color: #2196f3;
        margin-bottom: 15px;
      }

      .setup ol {
        margin-left: 20px;
        line-height: 1.8;
      }

      .challenge {
        background: #fff;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 30px;
        margin-bottom: 30px;
        transition: all 0.3s ease;
      }

      .challenge:hover {
        border-color: #667eea;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
      }

      .challenge-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 15px;
      }

      .challenge-number {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.3em;
        flex-shrink: 0;
      }

      .challenge-title {
        font-size: 1.6em;
        color: #2d3748;
        flex: 1;
        min-width: 200px;
      }

      .help-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        margin-left: auto;
      }

      .help-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .help-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        font-weight: bold;
        font-size: 1em;
      }

      .challenge-description {
        background: #f8f9fa;
        padding: 18px;
        border-radius: 6px;
        margin-bottom: 20px;
        line-height: 1.7;
        font-size: 1.05em;
      }

      .requirements {
        margin-top: 20px;
      }

      .requirements h4 {
        color: #667eea;
        margin-bottom: 12px;
        font-size: 1.15em;
      }

      .requirements ul {
        margin-left: 20px;
        line-height: 1.9;
      }

      .requirements li {
        margin-bottom: 10px;
      }

      code {
        background: #e9ecef;
        padding: 3px 8px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        color: #e83e8c;
        font-size: 0.92em;
      }

      /* CODE EDITOR SECTION */
      .code-editor-section {
        margin-top: 30px;
        border: 3px solid #e9ecef;
        border-radius: 12px;
        overflow: hidden;
        background: #1e1e1e;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      }

      .editor-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px 28px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        font-size: 1.1em;
      }

      .reset-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.4);
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.9em;
        transition: all 0.3s ease;
        font-weight: 600;
      }

      .reset-btn:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: translateY(-2px);
      }

      .format-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.4);
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.9em;
        transition: all 0.3s ease;
        font-weight: 600;
        margin-right: 10px;
      }

      .format-btn:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: translateY(-2px);
      }

      .code-editor {
        width: 100%;
        min-height: 450px;
        max-height: 700px;
        padding: 30px;
        font-family: "Consolas", "Monaco", "Courier New", monospace;
        font-size: 16px;
        line-height: 1.8;
        border: none;
        background: #1e1e1e;
        color: #d4d4d4;
        resize: vertical;
        outline: none;
        tab-size: 2;
      }

      .code-editor:focus {
        outline: 4px solid #667eea;
        outline-offset: -4px;
        background: #252525;
      }

      .run-btn {
        width: 100%;
        background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
        color: white;
        border: none;
        padding: 20px;
        font-size: 1.15em;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        text-transform: uppercase;
        letter-spacing: 1.2px;
      }

      .run-btn:hover {
        background: linear-gradient(135deg, #45a049 0%, #3d8b40 100%);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
      }

      .console-output {
        padding: 30px;
        background: #f8f9fa;
        min-height: 100px;
        max-height: 500px;
        overflow-y: auto;
        border-top: 3px solid #e9ecef;
        font-size: 15px;
      }

      .console-output:empty::before {
        content: 'üí° Click "RUN TESTS" to see your results here...';
        color: #999;
        font-style: italic;
        font-size: 17px;
      }

      .test-running {
        color: #667eea;
        font-weight: 700;
        font-size: 1.3em;
        text-align: center;
        padding: 40px;
      }

      .test-summary {
        padding: 22px;
        border-radius: 10px;
        margin-bottom: 22px;
        font-size: 1.25em;
        text-align: center;
        font-weight: 700;
      }

      .test-summary.all-passed {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        color: #155724;
        border: 3px solid #28a745;
      }

      .test-summary.some-failed {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        color: #721c24;
        border: 3px solid #dc3545;
      }

      .test-result {
        padding: 18px 22px;
        margin-bottom: 16px;
        border-radius: 8px;
        border-left: 5px solid;
        background: white;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }

      .test-result.passed {
        border-left-color: #4caf50;
        background: linear-gradient(135deg, #f1f8f4 0%, #ffffff 100%);
      }

      .test-result.failed {
        border-left-color: #f44336;
        background: linear-gradient(135deg, #fff1f0 0%, #ffffff 100%);
      }

      .test-header {
        display: flex;
        align-items: center;
        gap: 14px;
        font-weight: 700;
        font-size: 1.05em;
      }

      .test-icon {
        font-size: 1.5em;
      }

      .test-result.passed .test-icon {
        color: #4caf50;
      }

      .test-result.failed .test-icon {
        color: #f44336;
      }

      .test-details {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 2px solid #e9ecef;
      }

      .test-error {
        color: #d32f2f;
        background: #ffebee;
        padding: 16px;
        border-radius: 6px;
        font-family: "Courier New", monospace;
        font-weight: 600;
        word-break: break-word;
      }

      .test-expected,
      .test-actual {
        padding: 14px;
        border-radius: 6px;
        font-family: "Courier New", monospace;
        margin-top: 10px;
        font-size: 0.95em;
      }

      .test-expected {
        background: #e8f5e9;
        color: #2e7d32;
        border: 2px solid #4caf50;
      }

      .test-actual {
        background: #ffebee;
        color: #c62828;
        border: 2px solid #f44336;
      }

      .test-expected::before {
        content: "‚úì Expected: ";
        font-weight: bold;
      }

      .test-actual::before {
        content: "‚úó Actual: ";
        font-weight: bold;
      }

      /* MODAL STYLES */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        padding: 20px;
        overflow-y: auto;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background: white;
        border-radius: 12px;
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        transform: scale(0.9);
        opacity: 0;
        transition: all 0.3s ease;
      }

      .modal.active {
        transform: scale(1);
        opacity: 1;
      }

      .modal-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px 30px;
        border-radius: 12px 12px 0 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .modal-header h2 {
        font-size: 1.8em;
        margin: 0;
      }

      .modal-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        font-size: 2em;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        line-height: 1;
      }

      .modal-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
      }

      .modal-body {
        padding: 30px;
      }

      .modal-section {
        margin-bottom: 25px;
      }

      .modal-section h3 {
        color: #667eea;
        font-size: 1.3em;
        margin-bottom: 12px;
      }

      .modal-section p {
        line-height: 1.8;
        color: #2d3748;
        margin-bottom: 10px;
      }

      .modal-section ul {
        margin-left: 20px;
        line-height: 1.8;
        color: #2d3748;
      }

      .modal-section li {
        margin-bottom: 8px;
      }

      .modal-section strong {
        color: #667eea;
      }

      .code-example {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        border-radius: 6px;
        padding: 15px;
        margin-top: 15px;
        overflow-x: auto;
      }

      .code-example pre {
        margin: 0;
        font-family: "Courier New", monospace;
        font-size: 0.9em;
        line-height: 1.6;
        color: #2d3748;
        white-space: pre;
        overflow-x: auto;
      }

      .tip-section {
        background: #f1f8e9;
        border-left: 4px solid #4caf50;
        padding: 15px;
        border-radius: 6px;
      }

      .tip-section h3 {
        color: #4caf50;
      }

      .footer {
        text-align: center;
        padding: 30px;
        background: #f8f9fa;
        color: #6c757d;
        font-size: 0.95em;
      }

      @media (max-width: 768px) {
        .code-editor {
          font-size: 14px;
          min-height: 350px;
          padding: 20px;
        }

        .challenge {
          padding: 20px;
        }

        .modal {
          max-width: 95%;
        }

        .modal-header h2 {
          font-size: 1.4em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üéØ JavaScript Class & Inheritance Assessment</h1>
        <div class="difficulty-badge">‚≠ê BEGINNER-INTERMEDIATE</div>
      </div>

      <div class="content">
        <div class="intro">
          <h2>Welcome to Your Assessment!</h2>
          <p style="margin-bottom: 15px">
            This assessment contains 3 progressive challenges that will help you
            master JavaScript classes and inheritance.
          </p>
          <ul>
            <li>
              Challenge 1: <strong>Beginner</strong> (Basic classes,
              constructors, methods)
            </li>
            <li>
              Challenge 2: <strong>Beginner</strong> (Private fields,
              encapsulation)
            </li>
            <li>
              Challenge 3: <strong>Beginner-Intermediate</strong> (Inheritance,
              super)
            </li>
          </ul>
        </div>

        <div class="setup">
          <h3>üìã How to Use</h3>
          <ol>
            <li>Read each challenge description carefully</li>
            <li>
              Click the <strong>"Help"</strong> button for guidance and examples
            </li>
            <li>Write your code in the editor</li>
            <li>
              Press <strong>Option+Shift+F</strong> (Mac) or
              <strong>Alt+Shift+F</strong> (Windows) to auto-format your code ‚ú®
            </li>
            <li>Click "RUN TESTS" to check your solution</li>
            <li>All tests should pass (‚úì) before moving on!</li>
          </ol>
        </div>

        <!-- Challenge 1 -->
        <div class="challenge">
          <div class="challenge-header">
            <div class="challenge-number">1</div>
            <div class="challenge-title">Basic Class Creation</div>
            <button class="help-btn" data-modal="modal-1">
              <span class="help-icon">?</span> Help
            </button>
          </div>
          <div class="challenge-description">
            Create your first JavaScript class with constructors, properties,
            and methods.
          </div>
          <div class="requirements">
            <h4>Requirements:</h4>
            <ul>
              <li>Create a class called <code>Book</code></li>
              <li>
                Constructor should accept: <code>title</code>,
                <code>author</code>, <code>pages</code>
              </li>
              <li>
                Method <code>getInfo()</code> returns:
                <code>"Title by Author - Pages pages"</code>
              </li>
              <li>
                Method <code>read()</code> returns:
                <code>"You are reading Title"</code>
              </li>
            </ul>
          </div>

          <div class="code-editor-section">
            <div class="editor-header">
              <span>üíª Code Editor</span>
              <div>
                <button class="format-btn" data-challenge="1">
                  Format Code
                </button>
                <button class="reset-btn" data-challenge="1">Reset Code</button>
              </div>
            </div>
            <textarea id="editor-1" class="code-editor" spellcheck="false">
class Book {
  constructor(title, author, pages) {
    // Your code here
  }

  getInfo() {
    // Your code here
  }

  read() {
    // Your code here
  }
}</textarea
            >
            <button class="run-btn" data-challenge="1">‚ñ∂ Run Tests</button>
            <div id="output-1" class="console-output"></div>
          </div>
        </div>

        <!-- Challenge 2 -->
        <div class="challenge">
          <div class="challenge-header">
            <div class="challenge-number">2</div>
            <div class="challenge-title">Class with Private Fields</div>
            <button class="help-btn" data-modal="modal-2">
              <span class="help-icon">?</span> Help
            </button>
          </div>
          <div class="challenge-description">
            Learn about encapsulation using private fields (starting with
            <code>#</code>).
          </div>
          <div class="requirements">
            <h4>Requirements:</h4>
            <ul>
              <li>Create a class called <code>BankAccount</code></li>
              <li>Use a private field <code>#balance</code></li>
              <li>
                Constructor accepts: <code>accountHolder</code>,
                <code>initialBalance</code>
              </li>
              <li>
                Method <code>deposit(amount)</code> - adds to balance, returns
                new balance
              </li>
              <li>
                Method <code>withdraw(amount)</code> - subtracts if sufficient
                funds, or returns <code>"Insufficient funds"</code>
              </li>
              <li>
                Method <code>getBalance()</code> - returns current balance
              </li>
              <li>
                Property <code>accountHolder</code> - stores account holder name
              </li>
            </ul>
          </div>

          <div class="code-editor-section">
            <div class="editor-header">
              <span>üíª Code Editor</span>
              <div>
                <button class="format-btn" data-challenge="2">
                  Format Code
                </button>
                <button class="reset-btn" data-challenge="2">Reset Code</button>
              </div>
            </div>
            <textarea id="editor-2" class="code-editor" spellcheck="false">
class BankAccount {
  #balance;

  constructor(accountHolder, initialBalance) {
    // Your code here
  }

  deposit(amount) {
    // Your code here
  }

  withdraw(amount) {
    // Your code here
  }

  getBalance() {
    // Your code here
  }
}</textarea
            >
            <button class="run-btn" data-challenge="2">‚ñ∂ Run Tests</button>
            <div id="output-2" class="console-output"></div>
          </div>
        </div>

        <!-- Challenge 3 -->
        <div class="challenge">
          <div class="challenge-header">
            <div class="challenge-number">3</div>
            <div class="challenge-title">Basic Inheritance</div>
            <button class="help-btn" data-modal="modal-3">
              <span class="help-icon">?</span> Help
            </button>
          </div>
          <div class="challenge-description">
            Learn how to create child classes that extend parent classes and
            override methods.
          </div>
          <div class="requirements">
            <h4>Requirements:</h4>
            <ul>
              <li>
                Create parent class <code>Animal</code> with constructor,
                <code>makeSound()</code>, and <code>introduce()</code> methods
              </li>
              <li>
                Create child class <code>Dog</code> that extends
                <code>Animal</code>
              </li>
              <li>
                Override <code>makeSound()</code> to return
                <code>"Woof! Woof!"</code>
              </li>
              <li>Add method <code>getBreed()</code> that returns the breed</li>
            </ul>
          </div>

          <div class="code-editor-section">
            <div class="editor-header">
              <span>üíª Code Editor</span>
              <div>
                <button class="format-btn" data-challenge="3">
                  Format Code
                </button>
                <button class="reset-btn" data-challenge="3">Reset Code</button>
              </div>
            </div>
            <textarea id="editor-3" class="code-editor" spellcheck="false">
class Animal {
  constructor(name, species) {
    // Your code here
  }

  makeSound() {
    return "Some generic animal sound";
  }

  introduce() {
    // Your code here
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    // Your code here
  }

  makeSound() {
    // Your code here
  }

  getBreed() {
    // Your code here
  }
}</textarea
            >
            <button class="run-btn" data-challenge="3">‚ñ∂ Run Tests</button>
            <div id="output-3" class="console-output"></div>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>Happy Coding! üöÄ</p>
      </div>
    </div>

    <!-- MODALS -->
    <div class="modal-overlay" id="modal-overlay">
      <!-- Modal 1 -->
      <div class="modal" id="modal-1">
        <div class="modal-header">
          <h2>üìö Challenge 1: Basic Class Creation</h2>
          <button class="modal-close" data-close="modal-1">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-section">
            <h3>üéØ What You'll Learn</h3>
            <p>
              This challenge introduces the fundamental building blocks of
              JavaScript classes: constructors, properties, and methods.
            </p>
          </div>

          <div class="modal-section">
            <h3>üìñ Class Basics</h3>
            <p>A class is like a blueprint for creating objects. It defines:</p>
            <ul>
              <li>
                <strong>Properties:</strong> Data that each object will have
              </li>
              <li>
                <strong>Methods:</strong> Functions that each object can perform
              </li>
            </ul>
          </div>

          <div class="modal-section">
            <h3>üí° Example Solution</h3>
            <div class="code-example">
              <pre>
class Book {
  constructor(title, author, pages) {
    this.title = title;
    this.author = author;
    this.pages = pages;
  }

  getInfo() {
    return `${this.title} by ${this.author} - ${this.pages} pages`;
  }

  read() {
    return `You are reading ${this.title}`;
  }
}</pre
              >
            </div>
          </div>

          <div class="modal-section tip-section">
            <h3>üí° Pro Tip</h3>
            <p>
              Always use <code>this.propertyName</code> to access properties
              inside class methods. Use template literals (<code>`${}`</code>)
              to build strings!
            </p>
          </div>
        </div>
      </div>

      <!-- Modal 2 -->
      <div class="modal" id="modal-2">
        <div class="modal-header">
          <h2>üîí Challenge 2: Private Fields</h2>
          <button class="modal-close" data-close="modal-2">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-section">
            <h3>üéØ What You'll Learn</h3>
            <p>
              Private fields allow you to hide internal data and control how
              it's accessed. This is called encapsulation!
            </p>
          </div>

          <div class="modal-section">
            <h3>üìñ Private Fields</h3>
            <ul>
              <li>Start with a <code>#</code> symbol</li>
              <li>Must be declared at the top of the class</li>
              <li>Cannot be accessed from outside the class</li>
              <li>Provide data protection</li>
            </ul>
          </div>

          <div class="modal-section">
            <h3>üí° Example Solution</h3>
            <div class="code-example">
              <pre>
class BankAccount {
  #balance;

  constructor(accountHolder, initialBalance) {
    this.accountHolder = accountHolder;
    this.#balance = initialBalance;
  }

  deposit(amount) {
    this.#balance += amount;
    return this.#balance;
  }

  withdraw(amount) {
    if (amount > this.#balance) {
      return "Insufficient funds";
    }
    this.#balance -= amount;
    return this.#balance;
  }

  getBalance() {
    return this.#balance;
  }
}</pre
              >
            </div>
          </div>

          <div class="modal-section tip-section">
            <h3>üí° Pro Tip</h3>
            <p>
              Private fields must be declared at the class level. Use
              <code>#</code> every time you access them!
            </p>
          </div>
        </div>
      </div>

      <!-- Modal 3 -->
      <div class="modal" id="modal-3">
        <div class="modal-header">
          <h2>üêï Challenge 3: Inheritance</h2>
          <button class="modal-close" data-close="modal-3">&times;</button>
        </div>
        <div class="modal-body">
          <div class="modal-section">
            <h3>üéØ What You'll Learn</h3>
            <p>
              Inheritance allows you to create specialized classes based on more
              general ones. Child classes inherit everything from their parents!
            </p>
          </div>

          <div class="modal-section">
            <h3>üìñ How Inheritance Works</h3>
            <ul>
              <li>
                Use <code>extends</code> keyword to inherit from a parent class
              </li>
              <li>Use <code>super()</code> to call the parent constructor</li>
              <li>Child inherits all parent methods automatically</li>
              <li>Child can override parent methods</li>
            </ul>
          </div>

          <div class="modal-section">
            <h3>üí° Example Solution</h3>
            <div class="code-example">
              <pre>
class Animal {
  constructor(name, species) {
    this.name = name;
    this.species = species;
  }

  makeSound() {
    return "Some generic animal sound";
  }

  introduce() {
    return `I am ${this.name}, a ${this.species}`;
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    super(name, "Dog");
    this.breed = breed;
  }

  makeSound() {
    return "Woof! Woof!";
  }

  getBreed() {
    return this.breed;
  }
}</pre
              >
            </div>
          </div>

          <div class="modal-section tip-section">
            <h3>üí° Pro Tip</h3>
            <p>
              <code>super()</code> must be called before using
              <code>this</code> in the child constructor!
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Load Prettier for code formatting -->
    <script src="https://unpkg.com/prettier@2.8.8/standalone.js"></script>
    <script src="https://unpkg.com/prettier@2.8.8/parser-babel.js"></script>

    <script>
      // Default code templates
      const defaultCode = {
        1: `class Book {
  constructor(title, author, pages) {
    // Your code here
  }

  getInfo() {
    // Your code here
  }

  read() {
    // Your code here
  }
}`,
        2: `class BankAccount {
  #balance;

  constructor(accountHolder, initialBalance) {
    // Your code here
  }

  deposit(amount) {
    // Your code here
  }

  withdraw(amount) {
    // Your code here
  }

  getBalance() {
    // Your code here
  }
}`,
        3: `class Animal {
  constructor(name, species) {
    // Your code here
  }

  makeSound() {
    return "Some generic animal sound";
  }

  introduce() {
    // Your code here
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    // Your code here
  }

  makeSound() {
    // Your code here
  }

  getBreed() {
    // Your code here
  }
}`,
      };

      // Test Runner
      const TestRunner = {
        challenge1: (userCode) => {
          const results = [];
          try {
            eval(userCode);
            const book1 = new Book("1984", "George Orwell", 328);
            const book2 = new Book("The Hobbit", "J.R.R. Tolkien", 310);

            results.push({
              test: "book1.getInfo()",
              expected: '"1984 by George Orwell - 328 pages"',
              actual: book1.getInfo(),
              passed: book1.getInfo() === "1984 by George Orwell - 328 pages",
            });

            results.push({
              test: "book2.getInfo()",
              expected: '"The Hobbit by J.R.R. Tolkien - 310 pages"',
              actual: book2.getInfo(),
              passed:
                book2.getInfo() === "The Hobbit by J.R.R. Tolkien - 310 pages",
            });

            results.push({
              test: "book1.read()",
              expected: '"You are reading 1984"',
              actual: book1.read(),
              passed: book1.read() === "You are reading 1984",
            });
          } catch (error) {
            results.push({
              test: "Code Execution",
              error: error.message,
              passed: false,
            });
          }
          return results;
        },

        challenge2: (userCode) => {
          const results = [];
          try {
            eval(userCode);
            const account = new BankAccount("Alice", 1000);

            results.push({
              test: "account.getBalance() === 1000",
              expected: 1000,
              actual: account.getBalance(),
              passed: account.getBalance() === 1000,
            });

            results.push({
              test: "account.deposit(500) === 1500",
              expected: 1500,
              actual: account.deposit(500),
              passed: account.deposit(500) === 1500,
            });

            results.push({
              test: "account.withdraw(200) === 1300",
              expected: 1300,
              actual: account.withdraw(200),
              passed: account.withdraw(200) === 1300,
            });

            results.push({
              test: 'account.withdraw(2000) === "Insufficient funds"',
              expected: '"Insufficient funds"',
              actual: account.withdraw(2000),
              passed: account.withdraw(2000) === "Insufficient funds",
            });

            results.push({
              test: 'account.accountHolder === "Alice"',
              expected: '"Alice"',
              actual: account.accountHolder,
              passed: account.accountHolder === "Alice",
            });
          } catch (error) {
            results.push({
              test: "Code Execution",
              error: error.message,
              passed: false,
            });
          }
          return results;
        },

        challenge3: (userCode) => {
          const results = [];
          try {
            eval(userCode);
            const animal = new Animal("Generic", "Unknown");
            const dog = new Dog("Max", "Golden Retriever");

            results.push({
              test: "animal.makeSound()",
              expected: '"Some generic animal sound"',
              actual: animal.makeSound(),
              passed: animal.makeSound() === "Some generic animal sound",
            });

            results.push({
              test: "animal.introduce()",
              expected: '"I am Generic, a Unknown"',
              actual: animal.introduce(),
              passed: animal.introduce() === "I am Generic, a Unknown",
            });

            results.push({
              test: "dog.makeSound()",
              expected: '"Woof! Woof!"',
              actual: dog.makeSound(),
              passed: dog.makeSound() === "Woof! Woof!",
            });

            results.push({
              test: "dog.introduce()",
              expected: '"I am Max, a Dog"',
              actual: dog.introduce(),
              passed: dog.introduce() === "I am Max, a Dog",
            });

            results.push({
              test: "dog.getBreed()",
              expected: '"Golden Retriever"',
              actual: dog.getBreed(),
              passed: dog.getBreed() === "Golden Retriever",
            });
          } catch (error) {
            results.push({
              test: "Code Execution",
              error: error.message,
              passed: false,
            });
          }
          return results;
        },

        runTests: (challengeNumber, userCode) => {
          const testFunction = TestRunner[`challenge${challengeNumber}`];
          if (!testFunction) {
            return [
              {
                test: "Invalid Challenge",
                error: `No tests found for challenge ${challengeNumber}`,
                passed: false,
              },
            ];
          }
          return testFunction(userCode);
        },
      };

      // Display test results
      function displayResults(outputElement, results) {
        const allPassed = results.every((r) => r.passed);
        const passedCount = results.filter((r) => r.passed).length;
        const totalCount = results.length;

        let html = `
        <div class="test-summary ${allPassed ? "all-passed" : "some-failed"}">
          <strong>${passedCount}/${totalCount} tests passed</strong>
          ${allPassed ? " üéâ" : ""}
        </div>
      `;

        results.forEach((result) => {
          html += `
          <div class="test-result ${result.passed ? "passed" : "failed"}">
            <div class="test-header">
              <span class="test-icon">${result.passed ? "‚úì" : "‚úó"}</span>
              <span class="test-name">${result.test}</span>
            </div>
            ${
              !result.passed
                ? `
              <div class="test-details">
                ${
                  result.error
                    ? `
                  <div class="test-error">Error: ${result.error}</div>
                `
                    : `
                  <div class="test-expected">Expected: ${result.expected}</div>
                  <div class="test-actual">Actual: ${JSON.stringify(
                    result.actual
                  )}</div>
                `
                }
              </div>
            `
                : ""
            }
          </div>
        `;
        });

        outputElement.innerHTML = html;
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        const overlay = document.getElementById("modal-overlay");

        // Modal functionality
        document.querySelectorAll(".help-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const modalId = this.getAttribute("data-modal");
            const modal = document.getElementById(modalId);
            overlay.classList.add("active");
            modal.classList.add("active");
          });
        });

        document.querySelectorAll(".modal-close").forEach((btn) => {
          btn.addEventListener("click", function () {
            const modalId = this.getAttribute("data-close");
            const modal = document.getElementById(modalId);
            overlay.classList.remove("active");
            modal.classList.remove("active");
          });
        });

        overlay.addEventListener("click", function (e) {
          if (e.target === overlay) {
            overlay.classList.remove("active");
            document
              .querySelectorAll(".modal")
              .forEach((m) => m.classList.remove("active"));
          }
        });

        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape") {
            overlay.classList.remove("active");
            document
              .querySelectorAll(".modal")
              .forEach((m) => m.classList.remove("active"));
          }
        });

        // Handle Tab key in editors
        document.querySelectorAll(".code-editor").forEach((editor) => {
          editor.addEventListener("keydown", function (e) {
            // Tab key for indentation
            if (e.key === "Tab") {
              e.preventDefault();
              const start = this.selectionStart;
              const end = this.selectionEnd;
              this.value =
                this.value.substring(0, start) +
                "  " +
                this.value.substring(end);
              this.selectionStart = this.selectionEnd = start + 2;
            }

            // Format code on Option/Alt + Shift + F
            if ((e.altKey || e.metaKey) && e.shiftKey && e.key === "F") {
              e.preventDefault();

              try {
                const formattedCode = prettier.format(this.value, {
                  parser: "babel",
                  plugins: prettierPlugins,
                  semi: true,
                  singleQuote: false,
                  tabWidth: 2,
                  trailingComma: "none",
                  printWidth: 80,
                });

                this.value = formattedCode;

                // Show success feedback
                const challenge = this.id.replace("editor-", "");
                const output = document.getElementById(`output-${challenge}`);
                if (output) {
                  const originalHTML = output.innerHTML;
                  output.innerHTML =
                    '<div style="text-align: center; color: #4caf50; font-weight: 600; padding: 20px;">‚úì Code formatted successfully!</div>';
                  setTimeout(() => {
                    if (output.innerHTML.includes("formatted successfully")) {
                      output.innerHTML = originalHTML;
                    }
                  }, 2000);
                }
              } catch (error) {
                console.error("Formatting error:", error);
                const challenge = this.id.replace("editor-", "");
                const output = document.getElementById(`output-${challenge}`);
                if (output) {
                  output.innerHTML =
                    '<div style="text-align: center; color: #f44336; font-weight: 600; padding: 20px;">‚ö† Formatting error: ' +
                    error.message +
                    "</div>";
                  setTimeout(() => {
                    output.innerHTML = "";
                  }, 3000);
                }
              }
            }
          });
        });

        // Reset button handlers
        document.querySelectorAll(".reset-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const challenge = this.getAttribute("data-challenge");
            const editor = document.getElementById(`editor-${challenge}`);
            if (
              editor &&
              confirm("Are you sure you want to reset your code?")
            ) {
              editor.value = defaultCode[challenge];
              const output = document.getElementById(`output-${challenge}`);
              if (output) output.innerHTML = "";
            }
          });
        });

        // Format button handlers
        document.querySelectorAll(".format-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const challenge = this.getAttribute("data-challenge");
            const editor = document.getElementById(`editor-${challenge}`);
            const output = document.getElementById(`output-${challenge}`);

            if (!editor) return;

            try {
              const formattedCode = prettier.format(editor.value, {
                parser: "babel",
                plugins: prettierPlugins,
                semi: true,
                singleQuote: false,
                tabWidth: 2,
                trailingComma: "none",
                printWidth: 80,
              });

              editor.value = formattedCode;

              // Show success feedback
              if (output) {
                const originalHTML = output.innerHTML;
                output.innerHTML =
                  '<div style="text-align: center; color: #4caf50; font-weight: 600; padding: 20px;">‚úì Code formatted successfully!</div>';
                setTimeout(() => {
                  if (output.innerHTML.includes("formatted successfully")) {
                    output.innerHTML = originalHTML;
                  }
                }, 2000);
              }
            } catch (error) {
              console.error("Formatting error:", error);
              if (output) {
                output.innerHTML =
                  '<div style="text-align: center; color: #f44336; font-weight: 600; padding: 20px;">‚ö† Formatting error: ' +
                  error.message +
                  "</div>";
                setTimeout(() => {
                  output.innerHTML = "";
                }, 3000);
              }
            }
          });
        });

        // Run button handlers
        document.querySelectorAll(".run-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const challenge = this.getAttribute("data-challenge");
            const editor = document.getElementById(`editor-${challenge}`);
            const output = document.getElementById(`output-${challenge}`);

            if (!editor || !output) return;

            output.innerHTML =
              '<div class="test-running">Running tests...</div>';

            setTimeout(() => {
              const userCode = editor.value;
              const results = TestRunner.runTests(challenge, userCode);
              displayResults(output, results);
            }, 100);
          });
        });
      });

      // modal logic

      document.addEventListener("DOMContentLoaded", () => {
        const overlay = document.getElementById("modal-overlay");
        const helpButtons = document.querySelectorAll(".help-btn");
        const closeButtons = document.querySelectorAll(".modal-close");

        // --- helpers ---
        const lockScroll = () => {
          document.documentElement.style.overflow = "hidden";
          document.body.style.overflow = "hidden";
        };
        const unlockScroll = () => {
          document.documentElement.style.overflow = "";
          document.body.style.overflow = "";
        };
        const openModalById = (id) => {
          const modal = document.getElementById(id);
          if (!modal) return;
          overlay.classList.add("active");
          modal.classList.add("active");
          lockScroll();
        };
        const closeAllModals = () => {
          overlay.classList.remove("active");
          document
            .querySelectorAll(".modal.active")
            .forEach((m) => m.classList.remove("active"));
          unlockScroll();
        };

        // --- open ---
        helpButtons.forEach((btn) => {
          btn.addEventListener("click", () => openModalById(btn.dataset.modal));
        });

        // --- close (X buttons) ---
        closeButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            const modal = document.getElementById(btn.dataset.close);
            if (modal) modal.classList.remove("active");
            overlay.classList.remove("active");
            unlockScroll();
          });
        });

        // --- close on backdrop click ---
        overlay.addEventListener("click", (e) => {
          if (e.target === overlay) closeAllModals();
        });

        // --- close on Escape ---
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape") closeAllModals();
        });
      });
    </script>
  </body>
</html>
